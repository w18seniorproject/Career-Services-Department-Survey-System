<!DOCTYPE html>
<html lang= en>
    <head>
        <title>User Login</title>
        <meta charset="utf-8">
        <script src="../JQuery/jquery-3.3.1.min.js"></script>
        <script src="../Bootstrap/bootstrap-3.3.7/dist/js/bootstrap.min.js"></script>
        <meta name="viewport" content="width=device-width, height=device-height, initial-scale=1">
        <link rel="stylesheet" type="text/css" href="../Bootstrap/bootstrap-3.3.7/dist/css/bootstrap.min.css">
        <link href="../CSS/styles.css" rel="stylesheet" type="text/css"> 
    	<script type="text/javascript" src="../scripts/utils.js"></script>
        <script>
            $(function(){
                $("#header").load("../header.html"); 
            });
        </script>
    </head>
    <body>
        <div id="header"></div>
        
        <div class="form-centered">
            <legend class="legend">Take the Survey</legend>
            <form action="../index.php" method="post">
                <input class="form-control input-lg" placeholder="Pin" type="password" name="pin" id="pin">
                <br>
                <input class="btn btn-primary btn-lg btn-block" id="submitButton" type="submit" value="Submit">
                <input type="hidden" value="TAKE" name="aType">
            </form>
            <br>
            <p id="errorMessage" class="errorMessage"></p>
            <script type="text/javascript">
                var pin = getUrlParameter("pin");
                if(pin != ""){
                    $("#pin").val(pin);
                    $("#submitButton").trigger("click");
                }
                var string = getUrlParameter("error");
                var message = "";
                if(string == "wrongPin"){
                    message = "Either the PIN entered is not associated with a survey, or the survey has been closed. Contact the survey administrator if you believe you've received this message in error."
                }
                else if(string == "notUnique"){
                    message = "Internal error. PINs aren't unique";
                }
                document.getElementById("errorMessage").innerText = message;
            </script>
        </div>
    </body>
</html>
